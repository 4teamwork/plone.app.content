<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="plone"
      metal:use-macro="here/main_template/macros/master">

  <head>
      <metal:block fill-slot="top_slot">
        <tal:insert tal:replace="nothing"
              tal:define="dummy python:request.set('enable_border', 1)" />
      </metal:block>
  </head>

  <body>

    <div metal:fill-slot="main">
      <tal:protect tal:condition="python: not checkPermission('List folder contents', here)" tal:replace="here/raiseUnauthorized" />
    <metal:main-macro define-macro="main">
    <metal:contentsmacro define-macro="contents"
         tal:define="standalone python:1;
                     contentTypes view/getAllowedTypes;
                     contentFilter contentFilter|request/contentFilter|nothing;
                     b_size b_size|request/b_size|python:100;
                     view_title view_title|request/view_title|string:;
                     contentsMethod python:view.test(here.portal_type=='Topic', here.queryCatalog, here.getFolderContents);
                     batch batch|python:contentsMethod(contentFilter,batch=True, b_size=b_size);
                     full_view full_view|request/full_view|python:True;">


    <div tal:replace="structure view/contents_table"></div>
    
    </metal:contentsmacro>
    </metal:main-macro>
    </div>


  </body>
</html>
