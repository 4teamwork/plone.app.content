<div id="folderlisting-main-viewlet">
  <form name="folderContentsForm"
        method="post"
        action="folder_object"
        tal:attributes="action context/absolute_url">

    <tal:block condition="view/selectall">
      <input type="hidden" name="paths:list"
             tal:repeat="item view/batch/items_not_on_page"
             tal:attributes="value item/path"/>
    </tal:block>

    <!-- <div metal:use-macro="context/document_actions/macros/document_actions">
        Document actions (print, sendto etc)
    </div> -->
    <h1>
      <tal:block replace="structure view/get_icon" />
      <span tal:content="view/title" tal:omit-tag="">Directory Id</span>
    </h1>

    <a href=""
       class="link-parent"
       tal:define="parent_url view/parent_url"
       tal:condition="parent_url"
       tal:attributes="href string:${parent_url}/folder_contents"
       i18n:translate="go_to_parent_url">
        Up one level
    </a>

    <p class="documentDescription"
       tal:content="context/Description"
       tal:condition="context/Description">
        Description
    </p>

    <p class="discreet"
       tal:condition="not: view/batch"
       i18n:translate="description_no_visible_items_add_paste">
       This folder has no visible items. To add content, press the
       add button, or paste content from another location.
    </p>

    <metal:listing define-macro="folder_listing"
                   tal:define="nosortclass view/get_nosort_class">
                               
    <div class="visualClear" id="clear-space-before-navigation"><!-- --></div>

    <!-- Navigation -->
        
    <!-- <div metal:use-macro="context/batch_macros/macros/navigation" /> -->

      <table class="listing"
             summary="Content listing"
             i18n:attributes="summary summary_content_listing;">
        <thead>
          <tr>
            <th class="nosort">&nbsp;</th>
            <th tal:attributes="class nosortclass"
                id="foldercontents-title-column">&nbsp;<tal:title i18n:translate="listingheader_title"
                >Title</tal:title>&nbsp;</th>
            <th tal:attributes="class nosortclass"
                id="foldercontents-size-column">&nbsp;<tal:size i18n:translate="listingheader_size"
                >Size</tal:size>&nbsp;</th>
            <th tal:attributes="class nosortclass"
                id="foldercontents-modified-column">&nbsp;<tal:modified i18n:translate="listingheader_modified"
                >Modified</tal:modified>&nbsp;</th>
            <th tal:attributes="class nosortclass"
                id="foldercontents-status-column">&nbsp;<tal:state i18n:translate="listingheader_status"
                >State</tal:state>&nbsp;</th>
            <th class="nosort" 
                id="foldercontents-order-column"
                tal:condition="view/show_sort_column">
              &nbsp;<tal:order i18n:translate="listingheader_order">Order</tal:order>&nbsp;</th>
          </tr>
          <tr tal:condition="not:view/selectcurrentbatch">
            <th colspan="6" class="nosort">select: <a tal:attributes="href view/selectscreen_url" id="foldercontents-selectall">all</a></th>
          </tr>
          <tr tal:condition="view/show_select_all_items">
            <th colspan="6" class="nosort">
              All <tal:block replace="view/batch/items_on_page"/> items on this
              page are selected. 
              <a tal:attributes="href view/selectall_url" id="foldercontents-selectall-completebatch">Select
                 all <tal:block replace="view/batch/size"/> items in this
                 folder.</a>
              </th>
          </tr>
          <tr tal:condition="view/selectall">
            <th colspan="6" class="nosort">
              All <tal:block replace="view/batch/size"/> items in this folder
              are selected. <a tal:attributes="href view/selectnone_url" id="foldercontents-clearselection">Clear
                selection</a>
            </th>
          </tr>
        </thead>

        <metal:block tal:condition="view/batch">
        <tbody tal:define="portal view/portal">
            <tal:items tal:repeat="item view/batch">
                <tr tal:attributes="class item/table_row_class;
                                    id string:folder-contents-item-${item/id};" >

                   <tal:comment replace="nothing">
                        * We have to check if the browserDefault stuff is really necessary
                        * Create title_or_id metadata in the catalog (why not just use item.Title or item.getId? (alecm))
                   </tal:comment>

                   <td class="notDraggable">
                       <input type="checkbox"
                              class="noborder"
                              name="paths:list" id="#"
                              value="#"
                              tal:attributes="value   item/path;
                                              id      string:cb_${item/id};
                                              checked item/checked;
                                              alt     string:Select ${item/title_or_id};
                                              title   string:Select ${item/title_or_id}" />
                  <input type="hidden" name="selected_obj_paths:list" value="#"
                         tal:attributes="value item/relative_url" />

                </td>
                <td>
                    <span tal:attributes="class item/type_class">
                        <img tal:replace="structure item/icon" />
                        <a href="#" tal:attributes="href  item/view_url;
                                                  title string: ${item/obj_type}: ${item/description};
                                                  class item/state_class;">
                            <strong tal:omit-tag="not: item/is_browser_default">
                            <label tal:content="item/title_or_id"
                                   tal:attributes="for string:cb_${item/id}">
                              Item Title
                            </label>
                            </strong>
                        </a>
                    </span>

                    <span class="state-expired"
                          tal:condition="item/is_expired"
                          i18n:translate="time_expired">expired</span>
                </td>

                <td>
                  <span tal:condition="not: item/size"> &nbsp; </span>
                  <span tal:condition="item/size"
                        tal:content="item/size"
                        tal:attributes="class item/state_class"> size </span>
                </td>
                <td tal:content="item/modified"
                    tal:attributes="class item/state_class">
                    08/19/2001 03:01 AM
                </td>
                <td>
                    <span i18n:translate=""
                          tal:condition="item/state_title"
                          tal:content="item/state_title"
                          tal:attributes="class item/state_class" />
                    <span tal:condition="not: item/state_title">&nbsp;</span>
                </td>
                <td tal:condition="view/show_sort_column">
                  <a href=""
                     title="Move item up"
                     i18n:attributes="title title_move_item_up;"
                     tal:attributes="href string:${context/absolute_url}/folder_position?position=up&amp;id=${item/quoted_id}">
                    <span class="arrowDownAlternative">&#9659;</span>
                  </a>
                  &nbsp;
                  <a href=""
                     title="Move item down"
                     i18n:attributes="title title_move_item_down;"
                     tal:attributes="href string:${context/absolute_url}/folder_position?position=down&amp;id=${item/quoted_id}">
                    <span class="arrowDownAlternative">&#9661;</span>
                  </a>
                </td>
               </tr>
            </tal:items>
        </tbody>
      </metal:block>
      </table>
        <!-- Navigation -->
      <div class="listingBar"
           metal:define-macro="navigation"
           tal:define="batch view/batch"
           tal:condition="batch/multiple_pages">
          <span class="previous"
            tal:condition="batch/previous">
              <a href=""
                 tal:attributes="href batch/previous_url">
                 &laquo;
                 <span i18n:translate="batch_previous_x_items" tal:omit-tag="">
                     Previous
                     <span i18n:name="number" tal:omit-tag="" tal:content="batch/pagesize">n</span>
                     items
                 </span>
              </a>
          </span>

          <span class="next"
                tal:condition="batch/next">
              <a href=""
                 tal:attributes="href batch/next_url">
                 <span i18n:translate="batch_next_x_items" tal:omit-tag="">
                     Next
                     <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>
                     items
                 </span>
                 &raquo;
              </a>
          </span>

          <!-- Link to first -->
          <span tal:condition="batch/show_link_to_first">
              <a href=""
                 tal:attributes="href string:${view/url}/firstpage">1</a>
              <span tal:condition="batch/second_page_not_in_navlist"
                    tal:omit-tag="">
                 ...
              </span>
          </span>

          <!-- Pagelist with quantum leap links to previous pages for quick navigation -->
          <!--
          <span tal:repeat="linklist python:batch.navurls(request.form, batch.leapback)"
                tal:condition="batch/leapback"
                tal:omit-tag="" >
              <a href=""
                 tal:define="page python:linklist[0];
                             query python:linklist[1];"
                 tal:content="page"
                 tal:attributes="href python: '%s?%s' % (url,query)" >
              </a>
              ...
          </span>
          -->

          <!-- Pagelist with links to previous pages for quick navigation -->
          <span tal:repeat="link batch/prevurls"
                tal:omit-tag="" >
              <a href="" tal:content="link/name" tal:attributes="href link/url" >
              </a>
          </span>

          <!-- Current page -->
          <span tal:condition="batch/navlist"
                tal:omit-tag="">
              [<span tal:content="batch/pagenumber">Current page number</span>]
          </span>

          <!-- Pagelist with links to next pages for quick navigation -->
          <span tal:repeat="link batch/nexturls"
                tal:omit-tag="" >
              <a href="" tal:content="link/name" tal:attributes="href link/url" >
              </a>
          </span>

          <!-- Pagelist with quantum leap links to next pages for quick navigation -->
          <!--
          <span tal:repeat="linklist python:batch.navurls(request.form, batch.leapforward)"
                tal:condition="batch/leapforward"
                tal:omit-tag="" >
              ...
              <a href=""
                 tal:define="page python:linklist[0];
                             query python:linklist[1];"
                 tal:content="page"
                 tal:attributes="href python: '%s?%s' % (url,query)" >
              </a>
          </span>
          -->

          <!-- Link to last -->
          <span tal:condition="batch/show_link_to_last">
              <span tal:condition="batch/last_page_not_in_navlist"
                    tal:omit-tag="">
                 ...
              </span>
              <a href=""
                 tal:attributes="href batch/last_page_url"
                 tal:content="batch/lastpage">3457</a>
          </span>

      </div>
    </metal:listing>




    <tal:buttons tal:repeat="button view/folder_buttons">
      <input class="context"
             type="submit"
             name=""
             value=""
             tabindex=""
             i18n:attributes="value"
             tal:attributes="value button/title; name button/url; class button/cssclass" />
    </tal:buttons>
  </form>
</div>
